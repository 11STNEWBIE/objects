# 3장 역할, 책임, 협력

- 역할, 책임, 협력 : 객체지향 패러다임에서 핵심!
- 객체지향의 본질은 협력하는 객체들의 공동체를 창조하는 것이다.
- 핵심은 협력을 구성하기 위해 적절한 객체를 찾고, 적절한 책임을 할당하는 과정에서 드러난다.

# 1 협력

## 협력

메시지 전송은 객체 사이의 협력을 위해 사용할 수 있는 유일한 커뮤니케이션 수단이다.

메시지를 수신한 객체는 메서드를 실행해 요청에 응답한다. 여기서 객체가 메시지를 처리할 방법을 스스로 선택한다는 점이 중요하다.

외부의 객체는 오직 메시지만 전송할 수 있을 뿐이며 메시지를 어떻게 처리할지는 메시지를 수신한 객체가 직접 결정한다.

객체를 자율적으로 만드는 가장 기본적인 방법은 내부 구현을 캡슐화하는 것이다. 캡슐화를 통해 변경에 대한 파급효과를 제한할 수 있기 때문에 자율적인 객체는 변경하기도 쉬워진다.

## 협력이 설계를 위한 문맥을 결정한다

- 객체의 행동을 결정하는 것은 객체가 참여하고 있는 협력이다.
- **객체의 행동**을 결정하는 것이 **협력**이라면, **객체의 상태**를 결정하는 것은 **행동**이다.
    - 객체가 행동을 수행하는데 정보(객체의 상태)가 필요하기 때문이다.

# 2 책임

## 책임이란 무엇인가

- 책임 : 하는 것(doing) + 아는 것(knowing)
- 협력이 중요한 이유는 객체에게 할당할 책임을 결정할 수 있는 문맥을 결정하기 때문이다.
    - 적절한 협력 → 적절한 객체 → 단순 유연한 설계
- **객체 지향 설계에서 가장 중요한 것은 책임이다!**

## 책임 할당

자율적인 객체를 만드는 가장 기본적인 방법 : 책임을 수행하는 데 필요한 정보를 가장 잘 알고 있는 전문가에게 그 책임을 할당하는 것.

이를 책임 할당을 위한 *INFORMATION EXPERT*( 정보 전문가) 패턴이라고 한다.

- 객체 지향 설계는 1 **협력에 필요한 메시지를 찾고**, 2 **메시지에 적절한 객체를 선택**하는 반복적인 과정을 통해 이뤄진다.***

## 책임 주도 설계

책임을 찾고 책임을 수행할 적절한 객체를 찾아 할당하는 방식으로 협력을 설계하는 방식

## 메시지가 객체를 결정한다***

~~객체가 메시지를 선택하는 것이 아니라~~, **메시지가 객체를 선택해야 한다!**

- 이유
    - 1 최소한의 인터페이스
    - 2 추상적인 인터페이스

## 행동이 상태를 결정한다

# 3 역할

## 역할과 협력

- 역할 : 객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합
- 책임 할당 과정(// 메시지 찾고 다음 단계)
    - 1 메시지 수행하기 위한 적절한 역할이 무엇인가를 찾는다.
    - 2 역할을 수행할 객체를 선정한다.

## 유연하고 재사용 가능한 협력

- 역할이 중요한 이유는, 역할을 통해 유연하고 재사용 가능한 협력을 얻을 수 있기 때문이다.
- 역할이 다양한 종류의 객체를 수용할 수 있는 일종의 슬롯이자, 구체적 객체들의 타입을 캡슐화하는 **추상화**이다.

## 객체 대 역할

- 협력에 적합한 책임을 수행하는 대상이 한 종류라면, 간단하게 객체로 간주한다. 만약 여러 종류의 객체들이 참여할 수 있다면 역할이라고 부르면 된다.
- (역할과 객체를 명확하게 구분하는 것은 그렇게 중요하지 않다) 다양한 객체들이 협력에 참여한다는 것이 확실하다면 역할로 시작하라. 정확한 결정 내리기 어려우면 구체적 객체로 시작해라.
- 중요한 것은, 협력을 구체적인 객체가 아니라 **추상적인 역할의 관점에서 설계**하면 협력이 유연하고 재사용 가능해진다.

## 역할과 추상화

추상화를 이용한 설계가 가질 수 있는 두 가지 장점과 같다.

- 1> 중요한 정책을 상위 수준에서 단순화 할 수 있다.
    - 불필요한 세부 사항을 생략하고, 핵심적인 개념을 강조할 수 있다.
- 2> 설계가 좀 더 유연해진다.

## 배우와 배역

- 배역 : 배우 = 역할 : 객체
- 역할은 오직 시스템의 문맥 안에서 무엇을 하는지에 의해서만 정의될 수 있다. 역할은 객체의 페르소나다.
- 객체는 여러 역할을 가질 수 있지만 특정한 협력 안에서는 일시적으로 오직 하나의 역할만이 보여진다.

---

# 인상 깊었던 점

1 협력 → 역할 → 책임 → 객체

- 쉽지 않겠지만, 역할의 관점에서 추상화를 고려해 보자.

2 객체 지향 설계는 1 **협력에 필요한 메시지를 찾고**, 2 **메시지에 적절한 객체를 선택**하는 반복적인 과정을 통해 이뤄진다.

(2 : 메시지 수행하기 위한 적절한 역할이 무엇인가를 찾는다 → 역할을 수행할 객체를 선정한다.)
# Chapter 03. 역할, 책임, 협력

역할(role), 책임(responsibility), 협력(collaboration)

## 1. 협력

협력은 객체지향의 세계에서 기능을 구현할 수 있는 유일한 방법! 객체 사이의 협력을 위해 사용할 수 있는 유일한 커뮤니케이션 수단이 메세지.

- 메세지 전송
    - 객체가 직접 처리할 수 없는 정보나 행동 필요한 경우 다른 객체에게 도움 요청할 때
- 메세지 수신
    - 메세지를 수신한 객체는 **메서드**를 실행해 요청에 응답
    - 메시지 처리 방법은 객체 스스로가 선택 → 자율적 객체

결과적으로 객체를 자율적으로 만드는 가장 기본적인 방법은 내부 구현을 캡슐화 하는 것

### 협력이 설계를 위한 문맥을 결정한다

객체가 **행동**하는 데 필요한 정보에 의해 객체의 **상태** 결정되고, **협력** 안에서 객체가 처리할 메시지에 의해 객체의 **행동이**  결정됨

→ 객체가 참여하는 협력이 객체를 구성하는 행동과 상태 결정. 따라서 협력은 객체를 설계하는 데 필요한 일종의 문맥(context) 제공

## 2. 책임

책임이란 객체에 의해 정의되는 응집도 있는 행위의 집합으로, 객체가 유지해야 하는 정보와 수행할 수 있는 행동에 대해 개략적으로 서술한 문장.

'하는 것(doing)' 과 '아는 것(knowing)' 두 가지로 나눌 수 있음

### 책임 할당

책임을 수행하는 데 필요한 정보를 가장 잘 알고 있는 전문가에게 그 책임을 할당하여 자율적인 객체를 만들자!

→ infomation expert(정보 전문가) 패턴

객체지향 설계는 협력에 필요한 메세지를 찾고 메세지에 적절한 객체를 선택하는 반복적인 과정을 통해 이뤄짐. 메세지는 메세지가 수신할 객체의 책임을 결정

이 때 결정된 메세지가 객체의 퍼블릭 인터페이스를 결정

### 책임 주도 설계

책임 주도 설계(Responsibility-Driven Design, RDD): 책임을 찾고 책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계하는 방식

다음 두 가지 요소 고려 해야 함

1. **메세지가 객체를 결정**
    - 메세지를 먼저 식별한 뒤 메세지를 처리할 객체를 선택
2. **행동이 상태를 결정**
    - 객체가 협력에 적절한지를 결정하는 것은 객체의 상태 아닌 행동
    - 적절한 객체인가는 적절한 책임 할당했는가에 달렸고, 이는 협력에 적절한가에 달려 있음. 객체의 행동은 객체가 협력에 참여하는 유일한 방법

## 03. 역할

객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합을 역할이라고 함. 객체 아닌 역할에 책임을 할당함으로써 유연하고 재사용 가능한 협력 얻을 수 있음.

역할을 구현하는 가장 일반적인 방법은 추상 클래스와 인터페이스 사용하는 것.

협력에 참여하는 후보가 여러 객체에 의해 수행된다면 그 후보는 **역할**이 되지만, 하나의 객체만 협력에 참여한다면 후보는 **객체**가 됨

설계 초반에는 역할과 객체를 명확하게 구분하는 것이 중요하지 않기 때문에, 애매하다면 단순하게 객체로 시작하고 책임과 협력 정제해나가며 필요한 순간에 역할을 분리하는 게 좋음.

##역할, 책임, 협력

객체지향의 본질은 협력하는 객체들의 공동체를 창조하는 것이다.

---

>협력

* 객체 = 사회적 존재

* 커뮤니케이션은 only 메세지 전송으로 한다.

* 메시지 전송을 받은 객체는 스스로 어떻게 해야할 지 결정해야 한다. (=자율적 존재이기 떄문)

* 객체를 자율적으로 만드는 가장 기본적인 방법은 내부 구현을 '캡슐화'하는 것이다.

* 자율적인 객체는 자신에게 할당된 책임을 수행하던 중에 필요한 정보를 알지 못하거나 외부의 도움이 필요한 경우 적절한 객체에게 메시지를 전송해서 **협력** 을 요청한다.
이처럼 객체들은 서로 협력을 구성하며 요청, 응답을 통해 애플리케이션 기능을 구현한다.


Example)

Movie 객체는 영화 상영이 아닌 요금 계산을 담당하고 있다.

이것은 Movie가 영화를 예매하기 위한 협력에 참여하고 있고 그 안에서 요금을 계산하는 책임을 지고 있기 때문이다.

Movie의 행동을 결정하는 것은 영화 예매를 위한 협력이다.
협력이라는 문맥을 고려하지 않고는 Movie의 행동을 결정할 수 없다.


---

>책임


* 객체의 책임
  1. 객체가 무엇을 할 수 있는가
  2. 객체가 무엇을 아는가?
<br>
* 하는 것
  객체 생성, 계산 수행 등 스스로 하는것,
  다른 객체의 행동을 시작 시키는 것,
  다른 객체의 활동을 제어하고 조절하는 것
<br>

* 아는 것
  사적인 정보에관해 아는 것,
  관련된 객체에 관해 아는 것,
  자신이 유도하거나 계산할 수 있는 것에 관해 아는 것

<br>

책임은 메시지보다 훨씬 추상적이고 개념적으로 크다.

처음엔 단순한 책임이라고 생각했던 책임이 나중에는 여러 객체들이 협력해야만 하는 큰 책임으로 자라는 것이 일반적이다.

ex) 1. 예매하라 -> Screening -> 2. 가격을 계싼하라 -> Movie -> 3. 할인 가격을 계산하라 ....

이처럼 객체지향 설계는 협력에 필요한 메시지를 찾고 메시지에 적절한 객체를 선택하는 반복적인 과정이다.


<blockquote> 크레이그 라만 : '객체지향 개발에서 가장 중요한 능력은 책임을 능숙하게 소프트웨어 객체에 할당하는 것'
</blockquote>
<br>

---

>역할

객체는 협력이라는 주어진 문맥 안에서 특정한 목적을 갖게 된다.
객체가 어떤 특정한 협력안에서 수행하는 책임을 **역할** 이라 한다.

역할은 왜 필요한 걸까? 복잡하게만 만드는 거 아닐까?

WHY?

역할이 중요한 이유는 역할을 통해 **유연하고 재사용 가능한 협력** 을 얻을 수 있기 때문이다.

비슷한 책임할당이 필요할 때 (=할인 요금을 계산하라 but amount, percent 할인 두가지 방식일 때) 두 협력을 구현하면 코드의 중복이 일어남.

이때 객체라는 존재를 지우고 일종의 슬롯처럼 메시지에 응답할 수 있는 '대표자'를 둔다면
두 협력을 하나로 통합할 수 있을 것이다.

<br>

여기서 **역할이란 추상화** 라는 점에 주목하자!

역할은 객체를 추상화해서 객체 자체가 아닌 협력에 초점을 맞출 수 있게 한다.

작가의 개인적 견해 :
설계 초반에는 적절한 책임과 협력의 큰 그림을 탐색하는 것이 가장 중요한 목표여야 하고 역할과 객체를 명확하게 구분하는 것은 그렇게 중요하지는 않다는 것.

따라서 애매하다면 단순하게 객체로 시작하고 반복적으로 책임과 협력을 정제해가며 필요한 순간에 객체로부터 역할을 분리해내는 것이 가장 좋은 방법이다.

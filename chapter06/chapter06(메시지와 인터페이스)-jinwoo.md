# 6장 메시지와 인터페이스

주제 : 유연하고 재사용 가능한 퍼블릭 인터페이스를 만드는 데 도움이 되는 설계원칙과 기법

#디미터 원칙 #Tell_Don't_Ask #의도를_드러내는_인터페이스 #명령-쿼리_분리_원칙

# 1 협력과 메시지

## 클라이언트-서버 모델

## 메시지와 메시지 전송+

- 메시지는 객체들이 협력하기 위해 사용할 수 있는 유일한 의사소통 수단이다. 한 객체가 다른 객체에게 도움을 요청하는 것을 메시지 전송/패싱이라고 한다.
- 용어 정리
    - 메시지 : 전송-수신 양쪽 모두를 포함하는 개념으로, 객체의 오퍼레이션의 실행되도록 요청하는 것
    - 오퍼레이션 : 수신자 입장 객체의 인터페이스 강조
    - 메서드 : 오퍼레이션의 구현
    - 퍼블릭 인터페이스 : 수신 메시지의 묶음
    - 시그니처 : 오퍼레이션/메서드의 명세

# 2 인터페이스와 설계 품질**

## 책임 주도 설계 해라!!!

- 1 메시지 먼저 선택
- 2 메시지가 객체 선택

## 디미터 법칙

- 객체 내부 구조에 강하게 결합되지 않도록 협력 경로를 제한!
- Don't talk to strangers!
- 오직 하나의 도트만 사용하라.
- 특징
    - 클래스를 캡슐화하기 위해 따라야하는 구체적 지침을 제공한다.
    - 객체가 자기 자신을 책임지는 자율적인 존재여야 한다는 사실 강조.

## 묻지 말고 시켜라

객체의 외부에서 해당 객체의 상태를 기반으로 결정을 내리는 것은 객체의 캡슐화를 위반한다.

## 의도를 드러내는 인터페이스

인터페이스는 객체가 어떻게 하는지가 아니라 **무엇**을 하는지 서술해야 한다.

# 3 원칙의 함정

묻지 말고 시켜라, 디미터 법칙 준수가 항상 긍정적인 결과로만 귀결되는 것은 아니다.

- 맹목적으로 따르면 응집도 낮아지게 된다.
- 가끔은 묻는 것 외에 다른 방법이 존재하지 않는 경우도 있다. ex> 컬렉션의 경우 포함 객체에게 묻는 수밖에,

# 4 명령-쿼리 분리 원칙

"질문이 답변을 수정해서는 안된다"

- 준수하려면 다음 두 규칙을 준수해야 한다.
    - 객체의 상태를 변경하는 명령은 반환값을 가질 수 없다 ; 프로시저
    - 객체의 정보를 반환하는 쿼리는 상태를 변경할 수 없다 ; 함수
- 분리하지 않을 때 단점
    - 겉으로 쿼리처럼 보이지만, 내부적으로 부수효과를 가져서 이해하기 어렵고 버그 양산

- 객체지향 프로그래밍은 명령형 프로그래밍이다. 이는 메시지에 의한 객체의 상태 변경에 집중하기 때문에 견고한 참조 투명성과 멀어보인다. 그러나 부수효과를 가지는 명령으로부터 부수효과를 갖지 않는 쿼리를 분리함으로, 제한적으로나마 참조 투명성의 혜택을 누릴 수 있게 된다.

## "책임에 초점을 맞춰라"

메시지를 먼저 선택 → 그 후 메시지 선택할 객체 선택.

이것이 디미터 법칙, 묻지 말고 시켜라, 의도를 드러내는 인터페이스 충족시키는 쉬운 방법이다!!

---

# 인상 깊었던 점

- 메시지, 오퍼레이션 등 막연했던 용어에 대한 개념을 잡게 되어 좋았다
- 코드로 덤벼들지 말고, 메시지를 먼저 결정하고 메시지가 객체를 선택하도록 연습합시다!